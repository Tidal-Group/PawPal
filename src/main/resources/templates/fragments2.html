<!-- HEADER DASHBOARD -->
<header th:fragment="dashboard-header(title)">

    <nav class="navbar bg-body-tertiary">

        <div class="container-fluid">

            <!-- <div class="collapse navbar-collapse" id="navbarNavDropdown"> -->

                <!-- LINK A SINISTRA -->

                <ul class="navbar-nav">

                    <li class="nav-item">

                        <button class="btn btn-secondary" type="button" data-bs-toggle="offcanvas" data-bs-target="#dashboardOffcanvas" aria-controls="dashboardOffcanvas">☰</button>

                        <div class="offcanvas offcanvas-start" data-bs-scroll="true" tabindex="-1" id="dashboardOffcanvas" aria-labelledby="dashboardOffcanvasLabel">
                            <div class="offcanvas-header">
                                <h5 class="offcanvas-title" id="dashboardOffcanvasLabel">Backdrop with scrolling</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body">
                                <p>Try scrolling the rest of the page to see this option in action.</p>
                            </div>
                        </div>

                    </li>

                    <li class="nav-item" style="visibility: hidden;">
                        <h2 class="navbar-brand">Dashboard</h2>
                    </li>

                </ul>

                <!-- LINK A DESTRA -->

                <ul class="navbar-nav ms-auto">

                    <!-- <CLIENTE-VETERINARIO> -->
                    <div sec:authorize="hasAnyRole('CLIENTE','VETERINARIO')" style="display: contents;">

                        <li class="nav-item dropdown">

                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <span th:text="${#authentication.name}">Utente</span>
                            </a>

                            <ul class="dropdown-menu">

                                <li>
                                    <p class="dropdown-item">
                                        <span th:if="${#authorization.expression('hasRole(''CLIENTE'')')}"><strong><em>Cliente</em></strong></span>
                                        <span th:if="${#authorization.expression('hasRole(''VETERINARIO'')')}"><strong><em>Veterinario</em></strong></span>
                                    </p>
                                </li>

                                <li><hr class="dropdown-divider"></li>

                                <li>
                                    <a class="dropdown-item" th:href="@{/}">Home</a>
                                </li>

                                <li th:if="${#authorization.expression('hasRole(''VETERINARIO'')')}">
                                    <a class="dropdown-item" th:href="@{/dash/linee_guida}">Linee guida</a>
                                </li>

                                <li><hr class="dropdown-divider"></li>

                                <li>
                                    <form id="navbar_logout_form" th:action="@{/logout}" method="post" style="display: contents;">
                                        <a class="dropdown-item" href="#" onclick="document.getElementById('navbar_logout_form').submit()">Logout</a>
                                    </form>
                                </li>

                            </ul>

                        </li>

                        <li class="nav-item" style="visibility: hidden;">
                            <a class="nav-link" th:href="@{/dash}">Dashboard</a>
                        </li>

                    </div>
                    <!-- </CLIENTE-VETERINARIO> -->

                </ul>

            <!-- </div> -->

        </div>

    </nav>

    <div class="header-left">
        <button class="toggle-btn" type="button" aria-label="Apri sidebar">☰</button>
        <h2 class="header-title" th:text="${title}">Dashboard</h2>
    </div>

    <div class="header-right">
        <a th:href="@{/}" class="btn-home">Home</a>

        <div class="profile" aria-haspopup="true">

            <button class="profile-btn" type="button" aria-expanded="false">
                <span th:text="${#authentication.name}">Nome Utente</span> ▾
            </button>

            <div class="profile-dropdown" role="menu" aria-hidden="true">

                <div class="profile-info">

                    <div class="profile-name" th:text="${#authentication.name}">Utente</div>

                    <div class="profile-role">
                        <span th:if="${#authorization.expression('hasRole(''CLIENTE'')')}">Cliente</span>
                        <span th:if="${#authorization.expression('hasRole(''VETERINARIO'')')}">Veterinario</span>
                        <span th:if="${#authorization.expression('hasRole(''ADMIN'')')}">Amministratore</span>
                    </div>

                </div>

                <ul class="profile-actions">
                    <li><a th:href="@{/}">Home</a></li>
                    <li><a th:href="@{/dash/profilo}">Profilo</a></li>
                    <li>
                        <form th:action="@{/logout}" method="post">
                            <button type="submit">Logout</button>
                        </form>
                    </li>
                </ul>

            </div>

        </div>

    </div>
    
</header>