<!-- HEADER DASHBOARD -->
<header th:fragment="dashboard-header(title)">

    <style>
        body {
            margin-left: 200px;
        }
    </style>

    <nav class="nav flex-column border p-2 bg-light vh-100 position-fixed top-0 start-0" style="width: 200px;">
        
        <ul class="navbar-nav">

            <li class="nav-item">
                <button onclick="apriProfilo()" class="btn btn-secondary" th:classappend="${active} == 'profilo' ? ' active' : ''">Profilo</a>
            </li>

            <li class="nav-item">
                <button onclick="apriAppuntamenti()" class="btn btn-secondary" th:classappend="${active} == 'appuntamenti' ? ' active' : ''">Appuntamenti</a>
            </li>

            <li class="nav-item">
                <button onclick="apriRecensioni()" class="btn btn-secondary" th:classappend="${active} == 'recensioni' ? ' active' : ''">Recensioni</a>
            </li>

            <li class="nav-item" th:if="${#authentication.authorities.![authority].contains('ROLE_VETERINARIO')}">
                <button onclick="apriLineeGuida()" class="btn btn-secondary" th:classappend="${active} == 'linee_guida' ? ' active' : ''">Linee guida</a>
            </li>

        </ul>

        <ul class="navbar-nav">

            <!-- <CLIENTE-VETERINARIO> -->
            <div sec:authorize="hasAnyRole('CLIENTE','VETERINARIO')" style="display: contents;">

                <li class="nav-item dropdown">

                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <span th:text="${#authentication.name}">Utente</span>
                    </a>

                    <ul class="dropdown-menu">

                        <li>
                            <p class="dropdown-item">
                                <span th:if="${#authorization.expression('hasRole(''CLIENTE'')')}"><strong><em>Cliente</em></strong></span>
                                <span th:if="${#authorization.expression('hasRole(''VETERINARIO'')')}"><strong><em>Veterinario</em></strong></span>
                            </p>
                        </li>

                        <li><hr class="dropdown-divider"></li>

                        <li>
                            <a class="dropdown-item" th:href="@{/}">Home</a>
                        </li>

                        <li th:if="${#authorization.expression('hasRole(''VETERINARIO'')')}">
                            <a class="dropdown-item" th:href="@{/dash/linee_guida}">Linee guida</a>
                        </li>

                        <li><hr class="dropdown-divider"></li>

                        <li>
                            <form id="navbar_logout_form" th:action="@{/logout}" method="post" style="display: contents;">
                                <a class="dropdown-item" href="#" onclick="document.getElementById('navbar_logout_form').submit()">Logout</a>
                            </form>
                        </li>

                    </ul>

                </li>

                <li class="nav-item" style="visibility: hidden;">
                    <a class="nav-link" th:href="@{/dash}">Dashboard</a>
                </li>

            </div>
            <!-- </CLIENTE-VETERINARIO> -->

        </ul>

    </nav>

    <script defer>
        let profilo;
        let appuntamenti;
        let recensioni;
        let lineeGuida;

        document.addEventListener("DOMContentLoaded", () => {
            profilo = document.getElementById("profilo");
            appuntamenti = document.getElementById("appuntamenti");
            recensioni = document.getElementById("recensioni");
            lineeGuida = document.getElementById("linee_guida");
        });

        function apriProfilo() {
            if(profilo) profilo.style.display = "flex";
            if(appuntamenti) appuntamenti.style.display = "none";
            if(recensioni) recensioni.style.display = "none";
            if(lineeGuida) lineeGuida.style.display = "none";
        }

        function apriAppuntamenti() {
            if(appuntamenti) appuntamenti.style.display = "flex";
            if(profilo) profilo.style.display = "none";
            if(recensioni) recensioni.style.display = "none";
            if(lineeGuida) lineeGuida.style.display = "none";
        }

        function apriRecensioni() {
            if(recensioni) recensioni.style.display = "flex";
            if(profilo) profilo.style.display = "none";
            if(appuntamenti) appuntamenti.style.display = "none";
            if(lineeGuida) lineeGuida.style.display = "none";
        }

        function apriLineeGuida() {
            if(lineeGuida) lineeGuida.style.display = "flex";
            if(profilo) profilo.style.display = "none";
            if(appuntamenti) appuntamenti.style.display = "none";
            if(recensioni) recensioni.style.display = "none";
        }
    </script>
    
</header>